\documentclass[11pt]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usetheme{Mainz}
\usepackage{tikz}
\usepackage[utf8]{inputenc}
\usetikzlibrary{arrows,shapes,trees,decorations.pathreplacing,fit,calc}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}
\usepackage{listings}

\usepackage[T1]{fontenc}
\usepackage{color}
\usepackage{changepage}
\usepackage{xpatch}


\begin{document}
	\author{Steven Lang, Manfred Faldum}
	\title{Deep Feature Interpolation for Image Content Change}
	%\subtitle{}
	%\logo{}
	%\institute{}
	%\date{}
	%\subject{}
	%\setbeamercovered{transparent}
	%\setbeamertemplate{navigation symbols}{}
	\maketitle

	\definecolor{mygreen}{rgb}{0,0.6,0}
	\definecolor{mygray}{rgb}{0.5,0.5,0.5}
	\definecolor{mymauve}{rgb}{0.58,0,0.82}
	
	\lstset{ %
		backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
		basicstyle=\ttfamily\footnotesize,        % the size of the fonts that are used for the code
		breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
		breaklines=true,                 % sets automatic line breaking
		captionpos=b,                    % sets the caption-position to bottom
		commentstyle=\color{mygreen},    % comment style
		deletekeywords={...},            % if you want to delete keywords from the given language
		%escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
		extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
		%frame=single,	                   % adds a frame around the code
		keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
		%keywordstyle=\color{blue},       % keyword style
		language=Python,                 % the language of the code
		%otherkeywords={*,...},           % if you want to add more keywords to the set
		numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
		numbersep=-3pt,                   % how far the line-numbers are from the code
		numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
		%rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
		showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
		showstringspaces=false,          % underline spaces within strings only
		showtabs=false,                  % show tabs within strings adding particular underscores
		stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
		%stringstyle=\color{mymauve},     % string literal style
		tabsize=2,	                   % sets default tabsize to 2 spaces
		%title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
		escapeinside=||,
	}
\setbeamerfont{footnote}{size=\tiny}
	\newcommand{\specialcell}[2][c]{%
		\begin{tabular}[#1]{@{}l@{}}#2\end{tabular}}


\addtocounter{framenumber}{-1} %Titelseite wird nicht gez√§hlt im Counter




\begin{frame}[allowframebreaks]
	\tableofcontents
\end{frame}%[pausesections]} 

\section{Motivation}



\begin{frame}{Motivation}
		\begin{minipage}{.5\textwidth}
			\centering
			\begin{itemize}
				\item<1-> Right picture: add attribute in pixel-space
				\item<2-> New idea: add attribute in deep-feature-space
			\end{itemize}
		\end{minipage}%
		\begin{minipage}{.5\textwidth}
			\centering
			\includegraphics[width=100px]{../pictures/Berlusconi.png}		
		\end{minipage}
\end{frame}

\section{Basic Idea}

\begin{frame}{Basic Idea}
	How to get the attribute in deep-feature-space?
	\pause
	\begin{itemize}
		\item Let $\phi(x)$ be the mapping from pixel-space into deep-feature-space by concatenating an arbitrary number of layers
		\begin{center}
			\pause
			\input{../tikz/layers.tex}	
		\end{center}
	\end{itemize}
\end{frame}

\begin{frame}{Basic Idea}
	\begin{itemize}
		\item Take $k$ nearest neighbor images with existing attribute: $S^+$
		\item Take $k$ nearest neighbor images with missing attribute: $S^-$
		\vfill
		\pause
		
		\item $\phi^+ = \phi(S^+)$ and $\phi^- = \phi(S^-)$
		\item Build the mean $\overline{\phi^+}$ and $\overline{\phi^-}$
		\vfill
		\pause 
		
		\item Representation of attribute: $w=\overline{\phi^+}-\overline{\phi^-}$
	\end{itemize}
\end{frame}

\begin{frame}{Basic Idea}
	How to get the output picture?
	
	\vfill
	\pause
	
	\begin{itemize}
		\item $\phi(z) = \phi(x) + \alpha w$
		\item Reverse mapping of $\phi(z)$ into pixel space:
		
		\vfill
		\pause
		\begin{itemize}
			\item $\tilde{z} = \underset{\tilde{z}}{\mathrm{argmin}} \frac{1}{2} ||\phi(z)-\phi(\tilde{z})||_2^2 + \lambda R_{\beta}(\tilde{z})$ 
			\item with $R_{\beta}(\tilde{z}) = \sum_{i,j}((\tilde{z}_{i,j+1}-\tilde{z}_{i,j})^2 + (\tilde{z}_{i+1,j}-\tilde{z}_{i,j})^2)^{\frac{\beta}{2}}$
		\end{itemize}
		
		 
	\end{itemize}
	
\end{frame}

\begin{frame}{Practical}
	\begin{itemize}
		\item Model VGG19 pretrained on IMAGENET dataset
		\item $\phi(x)$ using the third, fourth and fifth Relu Layer
		\item $\beta=2$ and $\lambda = 0.001$ for the regularization term
		\item Tests were run against the LFW dataset
	\end{itemize} 
\end{frame}

\section{Example}

%------------------CLUSTER COMPUTING--------------------------------------------
\end{document}
